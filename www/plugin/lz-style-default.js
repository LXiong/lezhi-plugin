(function(){function S(t,D,m){var h=i.modules.config[D],j=h.type,k,f="b-"+j,x=g.getElemByClassName(t,"div","bShareRecommDiv2")[0],y=!1;k="&gt;&gt;";h.position=="left"&&(k="&lt;&lt;");j=="slide"&&(k=g.createElement("div","","recommSlideTag","","<div>"+k+"</div>\u4e50\u77e5\u63a8\u8350"),x.insertBefore(k,x.childNodes[0]));if(!g.lzhasClass(t,f)){g.addClass(t,f);var a,d=h.out,e,s,A,q,b;if(j=="slide")a=h.position,g.addClass(t,"b-"+j+" b-"+a),h=-t.offsetWidth,a=="left"?(x.style.left=h+"px",t.style.left="0"):(x.style.right=
h+"px",t.style.right="0"),d=!0,b=!1,e=h,A=function(){d&&!b&&(insiteFeeds>0?(i.stats.view("insite",D),z.adsShow&&i.stats.adsView(D,z.adsIds[D])):trendingFeeds>0&&i.stats.view("trending",D),b=!0);var f=d?0:-t.offsetWidth;t.style.zIndex=d?"99999999":"-1";if(e==f)d||I(m,d);else{e=d?e+40:e-40;if(d&&e>f||!d&&e<f)e=f;a=="left"?x.style.left=e+"px":x.style.right=e+"px";setTimeout(A,1)}},h=B.innerHeight?B.innerHeight:F.clientHeight||M.clientHeight,j=F.scrollHeight||M.scrollHeight,q=j-h,g.ready(function(){s=
g.createElement("div",m,"bShareRecommTag");P>0&&(g.getElemById(m)||F.appendChild(s));B.onscroll=function(){var a=M.scrollTop||F.scrollTop,b=g.getElemByClassName(t,"div","recommSlideTag")[0];a==0&&(y=!1);if(!y)(d=q/2<=a&&a!=0)&&I(m,d),A(),b.style.display=d?"block":"none"};if(g.getElemById(m))g.getElemById(m).onclick=function(){var a=g.getElemByClassName(t,"div","recommSlideTag")[0];y=d=!0;I(this.id);A();this.style.display="none";if(a)a.style.display="block"};g.getElemByClassName(t,"div","recommSlideTag")[0].onclick=
function(){d=!1;y=!0;A();this.style.display="none"}})}}function I(i,z){g.getElemById(i).style.display=z?"none":"block"}var B=window,R=B.document,F=R.body,M=R.documentElement,J=encodeURIComponent,i=B.lezhi,z=i.variables,g=i.util,Q,P;i.render=function(t,D){Q=P=0;if(B.location.href.indexOf("chinadaily.com.cn")>-1&&i.config.global.uuid=="a92f8285-36fe-4168-8f86-8e177d015e67"&&i.config.global.col==4){var m=t.insite,h=[],j=[],k=[],f,x;for(f=0,x=m.length;f<x;++f)m[f].adEntryId?j.push(m[f]):h.push(m[f]);
if(j.length==3)k.push(h[0]),k.push(j[0]),k.push(h[1]),k.push(h[2]),k.push(j[1]),k.push(h[3]),k.push(h[4]),k.push(j[2]),t.insite=k}for(m=0;m<i.modules.nodes.length;m++)if(i.modules.nodes[m].lezhiStyle==z.STYLETYPE_DEFAULT){var y,j=i.modules.nodes[m],a,d,e,s,A,k=i.modules.config[m];x=k.col;var q=k.row,b=k.pic,u=k.count,w=k.highlight,c="."+z.STYLETYPE_DEFAULT,G="bShareRecommTag"+g.getIndex(i.modules.nodes,j),p,o=0,n=0,r=0,F;if(j.oldVersionId)j=g.getElemById(j.id),j.oldVersionId=!0,j.lezhiStyle=z.STYLETYPE_DEFAULT,
i.modules.nodes[m]=j;if(j.idConfig||j.oldVersionId)c="#"+j.id;z.adsIds[m]=[];p=x*q>10?10:x*q;u=Math.ceil(u/p);h=j;f=m;d=u;o=void 0;n="";r=void 0;recommDiv2=g.createElement("div",h.oldVersionId?"bShareRecommDiv2":"","bShareRecommDiv2");h.appendChild(recommDiv2);d>1&&(recommDiv3=g.createElement("div","","bShareRecommDiv3"),recommDiv2.appendChild(recommDiv3));if(d>1){r=g.createElement("div","","bShareRecommPages");for(o=0;o<d;o++)n+='<span onclick="window.lezhi.switchPage(this,'+o+","+i.modules.config[f].col+
')" class="'+(o==0?"on":"")+'"></span>';r.innerHTML=n;recommDiv2.appendChild(r)}D&&(i.modules.currentActivated[m]=void 0);for(A in i.modules.sourceCount[m])for(y in t)if(A===y&&(F=!0,e="",f=0,h=t[y],a=h.length,y=y.split(":")[0],y=="insite"?insiteFeeds=a:trendingFeeds=a,a!=0)){Q<a&&(Q=a);d=g.createElement("div","","b-recomm-panel");d.setAttribute("sourceType",y);if(g.isUndefined(i.modules.currentActivated[m]))d.style.display="block",i.modules.currentActivated[m]=y;n=u>1?0:1;for(o=0;o<u+n;o++){e+='<ul class="b-recomm-list">';
for(var r=u>1?k.count:x*q,E=(o+1)*p;f<E&&f<a&&(f<r||!b&&f<q);++f){var v=h[f],C=v.url,K=v.title,L=k.hvcolor,N=w&&v.mark,O=v.ad,H="";s=LEZHI_PLUGIN_BASE+"/redirect?to="+J(C)+"&from="+k.url+"&sitePrefix="+J(k.sitePrefix)+"&ref="+y+"&uuid="+J(k.uuid)+"&type="+J(k.type)+"&pic="+J(b)+"&title="+J(k.title);if(O){if(!z.adsShow)z.adsShow=!0;H=v.adEntryId;u<=1&&z.adsIds[m].push(H);s+="&adEntryId="+H}e+="<li";O&&(e+=' adEntryId="'+H+'"');if(b){if(f==a-1||f==9||(f+1)%x==0)e+=' style="border-right:1px solid #fff;"';
e+=" onmouseover=\"this.style.background='"+L+"'\" onmouseout=\"this.style.background='none'\""}e+='><a href="'+C+'" onmousedown="this.href=\''+s+"';return true;\" onmouseup=\"t=this;setTimeout(function(){t.href='"+C+'\'},50);return true;" target="'+k.redirectType+'" title="'+K+'"';if(b){e+='" hidefocus="true">';if(!(A=v.pic))if(A=k.defaultPic,!A)A=i.variables.DEFAULT_PIC_URL;N&&(e+='<div class="hot-tag"></div>');e+='<img class="bshare-logos" src="'+A+'" /><div class="feed-title" title="'+g.htmlEncode(K)+
'"';N&&(e+='style="color:red;"');e+=">"+K+"</div>"}else N&&(e+='style="color:red;"'),e+=">"+K;e+="</a></li>"}e+=u>1?"</ul>":k.showLogo?'</ul><div class="b-recomm-footer"><a href="http://www.lezhi.me" target="_blank">\u4e50\u77e5</a></div>':"</ul>"}d.innerHTML=e;h=j;f=d;(u>1?g.getElemByClassName(h,"div","bShareRecommDiv3")[0]:g.getElemByClassName(h,"div","bShareRecommDiv2")[0]).appendChild(f);P++}j.styleObj&&j.styleObj.parentNode.removeChild(j.styleObj);q=j;b=i.modules.config[m];w=b.pic;p=b.picSize;h=b.position;
f=b.fontSize;d=b.type;o=b.rtcolor;n=b.hvcolor;r=b.htcolor;a=b.bdcolor;e=b.titleBgColor;s=b.titleImage;var E=b.titleFontSize,v=b.lineHeight,C=b.listType,K=b.picBorderRadius,L=b.bgcolor,N=b.titleBold,O=b.fontBold,H=b.fontUnderline,I=b.linkUnderline,M=h=="left"?"right":"left",l=c+"{z-index:"+(d=="slide"?999999:99999)+";overflow:hidden !important;margin:0 !important;padding:0 !important;}"+c+" .bShareRecommDiv2{position:relative;margin:0 !important;padding:0 !important;}.lz-module:after,.bShareRecommDiv2:after,.bShareRecommDiv3:after,.b-recomm-panel:after,.b-recomm-tab:after,.b-recomm-list:after{content:'.';display:block;height:0;clear:both;visibility:hidden;overflow:hidden;}"+
c+" .b-recomm-tab{width:100%;list-style:none !important;padding:0 !important;margin:0 !important;position:relative;z-index:999;";l+=d=="slide"?h=="left"?"left:0;":"left:25px;":"left:0;";l+="}";u>1&&(l+=c+" .bShareRecommDiv3{overflow:hidden;margin:0;padding:0;position:relative;border:1px solid "+(a?a:"#dadada")+";"+(L?"background:"+L+";":"transparent;"),l+=d=="slide"&&h=="right"?"left:25px;":"left:0;",i.util.isIE6&&a=="transparent"&&(l+="border:none;"),l+="}");l+=c+" .b-recomm-tab li{width:auto;list-style:none !important;height:15px;line-height:15px;float:left;cursor:pointer;margin:0 5px 0 0 !important;padding:5px 10px !important;text-align:center;border:1px solid "+
a+";border-width:1px 1px 0;position:relative;top:1px;z-index:100;font-size:"+E+"px;";i.util.isIE6&&a=="transparent"&&(l+="border:none;");l+=(e?"background-color:"+e+";":"")+(s?"background:url('"+s+"') 3px center no-repeat;padding-left:20px !important;":"")+(r?"color:"+r:"")+"}"+c+" .b-recomm-tab li.activated{cursor:default;background-color:#fff;border-top-width:2px;"+(N?"font-weight:bold;":"")+"}"+c+" .b-recomm-panel{display:none;margin:0 !important;overflow:hidden;padding:5px 0 0 !important;float:left;position:relative;left:0;";
u<=1?(l+="border:1px solid "+(a?a:"#dadada")+";",i.util.isIE6&&a=="transparent"&&(l+="border:none;")):l+="border:none;";l+=d=="slide"?h=="left"?"left:0;":u>1?"left:0;":"left:25px;":"left:0;";l+=L?"background:"+L+";":"background-color:#fff;";l+="clear:both;}"+c+" .b-recomm-list{height:auto;float:left;";!w&&d=="slide"&&3>=b.row&&(l+="height:68px;");l+="padding:0 4px !important;margin:0 !important;list-style:disc inside none;}"+c+" .b-recomm-list li{padding:0;display:block;vertical-align:top;text-align:center;text-indent:0 !important;"+
(O?"font-weight:bold;":"")+(w?"width:"+(p+28)+"px;height:auto;border:1px solid #fff;cursor:pointer;border-right-color:#f2f2f2;list-style:none !important;":"border:0;padding-left:10px !important;text-align:left;")+"overflow:hidden;margin:0;float:left;list-style: inside !important;}";l+=c+" .b-recomm-list a{font-size:"+f+"px;margin:0 !important;position:relative;text-decoration:"+(H?"underline":"none")+" !important;display:"+(w?"block;height:100%;overflow:visible;clear:both;":"list-item;zoom:1;height:24px;line-height:24px;"+
(C?"list-style-type:"+C+" !important;":"")+"overflow:hidden;color:"+o)+";}"+c+" .b-recomm-list a:hover{border-ratio:5px;text-decoration:"+(I?"underline":"none")+" !important;"+(w?"":n?"color:"+n:"")+"}#"+G+"{margin:0;padding:0;background:url("+LEZHI_STATIC_BASE+"/images/recommend.png) no-repeat;width:40px;height:40px;position:fixed;bottom:60px;*bottom:66px;";l+=(h=="left"?"left:10px;right:auto;":"right:10px;left:auto;")+"z-index:999999;cursor:pointer;}";u>1&&(l+=c+" .bShareRecommPages{text-align:center;position:absolute !important;width:100%;bottom:5px;}"+
c+" .bShareRecommPages span{display:inline-block;padding:0;margin:0 6px;line-height:25px;cursor:pointer;width:11px;height:11px;background:url("+B.lezhi.variables.PAGEOFF_PIC_URL+") no-repeat;}"+c+" .bShareRecommPages span.on{background:url("+B.lezhi.variables.PAGEON_PIC_URL+") no-repeat;}");g.isIE6&&(l+="*html #"+G+"{position:absolute;z-index:999999;bottom:auto;top:expression(eval(-70+document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)));}");
l+=c+" .b-recomm-list a:hover .feed-title{text-decoration:"+(I?"underline":"none")+" !important;}";l+=c+" .b-recomm-list .feed-title{cursor:pointer;overflow:hidden;word-wrap:break-word;word-break:break-all;padding:0 !important;margin:10px !important;font-size:"+f+"px;"+(v?"height:"+(v+1)*3+"px;line-height:"+(v+1)+"px;":"")+"text-decoration"+(H?"underline":"none")+" !important;"+(o?"color:"+o+";":"")+"}";w&&(l+=c+" .b-recomm-list .hot-tag{padding:0 !important;margin:0 !important;position:absolute;right:10px;top:4px;width:59px;height:59px;background:url("+
B.lezhi.variables.HOT_PIC_URL+") no-repeat;z-index:1;}"+c+" .b-recomm-list img{padding:3px !important;display:inline;margin:0 !important;position:relative;top:4px;border:1px solid "+a+";float:none !important;width:"+p+"px !important;height:"+p+"px !important;"+(K?"border-radius:5px;":""),i.util.isIE6&&a=="transparent"&&(l+="border:none;"),l+="}");l+=c+" .b-recomm-footer{overflow:hidden;margin:2px 0 0 !important;text-align:right;height:18px;width:100%;}"+c+" .b-recomm-footer a{font-size:12px;color:#999;text-decoration:none;height:15px !important;line-height:15px !important;position:relative;";
l+=b.position=="left"&&d=="slide"?"left:3px;float:left;}":"right:3px;float:right;}";l+=c+".b-slide{position:fixed;bottom:10px;top:auto;margin-top:0 !important;}";g.isIE6&&(l+="*html "+c+".b-slide{position:absolute;bottom:auto;top:expression(eval(-10+document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)));}");l+=c+".b-slide.b-left{left:0;}"+c+".b-slide.b-right{right:0 !important;}"+
c+".b-slide.b-right .b-recomm-tab li{float:left;}"+c+".b-slide.b-"+h+" .recommSlideTag{display:none;margin:0 !important;padding:0 0 4px !important;font-size:12px;border:1px solid #c2c2c2;position:absolute;width:23px;"+M+":1px;top:27px;cursor:pointer;text-align:center;line-height:17px;color:#444;background:-webkit-gradient(linear,0% 20%,0% 90%,from(#f4f4f4),to(#d7d7d7));background:-moz-linear-gradient(top,#f4f4f4,#d7d7d7);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='#f4f4f4',EndColorStr='#d7d7d7');_background:#e4e4e4;}";
c=g.loadStyle(l);q.styleObj=c;c=j;q=m;b=u;w=i.modules.config[q];p=g.getElemByClassName(c,"div","b-recomm-tab")[0];h=g.getElemByClassName(c,"div","bShareRecommDiv2")[0];f="";o=d=void 0;n=g.getElemByClassName(c,"div","b-recomm-panel");r=n.length;a=void 0;e=i.modules.currentActivated[q];p||(p=g.createElement("ul",c.oldVersionId?"bShareRecommTab":"","b-recomm-tab"),h.insertBefore(p,h.firstChild));for(d=0;d<r;++d)o=n[d].getAttribute("sourceType"),a=z.BSHARE_RECOMM_SOURCES_NAMES[o],f+="<li "+(e===o?'class="activated" ':
"")+"onclick=\"window.lezhi.switchTo(this,'"+n[d].getAttribute("sourceType")+"','"+i.modules.config[q].type+"',"+b+","+q+')" style="text-indent:0;">',f+=o=="insite"?w.promote:a,f+="</li>",e==o&&g.addClass(n[d],"activated"),d==0&&w.type=="fixed"&&(i.stats.view(o,q),b<=1&&z.adsShow&&i.stats.adsView(q,z.adsIds[q]));r==0?c.style.display="none":(p.style.visibility=n.length==1&&w.type=="slide"&&n[0].getAttribute("sourceType")=="insite"?"hidden":"visible",p.innerHTML=f);c=j;q=u;b=i.modules.config[m];f=b.picSize+
30;w=b.col;n=b.pic;p=0;h=g.getElemByClassName(c,"div","bShareRecommDiv2")[0];d=b.source=="insite,trending"?114:35;d=(b.titleBold?d+8:d)+b.titleFontSize*b.promote.length;f=c.style.width?parseInt(c.style.width,10):b.width!=0?b.width:b.pic?f*w>d?f*w:d:600;d=b.height;a=0;r=2;o=g.getElemByClassName(c,"div","hot-tag");if(q>1)a=g.getElemByClassName(c,"div","bShareRecommDiv3")[0],r=4,a.style.width=f+p-2+"px";if(n)b.type=="slide"&&(p=25),c.style.width=f+p+"px";else{b.type=="slide"&&(p=25);c.style.width=h.style.width=
f+p+"px";n=f-r;r=g.getElemByClassName(c,"div","b-recomm-panel");a=void 0;for(a=0;a<r.length;a++)r[a].style.width=n+"px"}n=[];E=g.getElemsByTagName(c,"div");e=e=a=void 0;r=parseInt(c.style.width,10);C=s=v=void 0;for(a=0;a<E.length;++a)e=E[a],g.lzhasClass(e,"b-recomm-panel")&&n.push(e);if(n.length!=0)for(e=0;e<n.length;++e){if(q>1){n[e].style.width=(h.offsetWidth-p)*q+"px";pageLists=g.getElemsByTagName(n[e],"ul");for(a=0;a<pageLists.length;++a)pageLists[a].style.width=h.offsetWidth-p-8+"px"}else if(b.pic)n[e].style.width=
c.offsetWidth-p-2<0?"":c.offsetWidth-p-2+"px";v=b.pic?"auto":r-2;v=b.type=="fixed"?v:v-30;s=g.getElemsByTagName(n[e],"li");for(a=0;a<s.length;++a)C=s[a],b.pic?C.style.width=(f-0-10)/w-2+"px":(C.style.width=(b.col==1?v-(a==s.length-1?50:20):v/2-25)+"px",C.style.textAlign="left");for(a=0;a<o.length;a++)o[a].style.right=((f-0-10)/w-2)/2-b.picSize/2+"px";e==0&&(recommDivHeight=q>1?c.clientHeight+18:c.clientHeight);if(d>recommDivHeight){a=d-+recommDivHeight;E=~~(a/b.row)/2;for(a=0;a<s.length;++a)if(s&&
s[a])s[a].style.paddingTop=s[a].style.paddingBottom=E+"px"}}S(j,m,G);u>1&&F&&(G=i.modules.config[m],c="",G.brand?c='<div class="b-recomm-footer"><span>'+G.brand+"</span></div>":G.showLogo&&(c='<div class="b-recomm-footer"><a href="http://www.lezhi.me" target="_blank">\u4e50\u77e5</a></div>'),g.getElemByClassName(j,"div","bShareRecommDiv3")[0].innerHTML+=c,D||i.autoPage(m,u,x,k.autoPageTime))}};B.lezhi.render(B.lezhi.variables.recommendation)})();
