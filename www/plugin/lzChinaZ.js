(function(){function n(f){return o.getElementById(f)}function s(f,e){var b={};typeof e=="string"&&(e=e.split(","));for(var c=0;c<f.length;c++)b[f[c]]=1;for(c=0;c<e.length;c++)b[e[c]]&&(b[e[c]]=0);var c=[],d;for(d in b)b[d]==0&&c.push(d);return e.toString()==c.toString()?!0:!1}function p(f,e){return f.className&&s(f.className.split(" "),e)}function t(f,e,b,c,d){var a=o.createElement(f);if(f==="a")a.href="javascript:;",a.target="_blank";if(e)a.id=e;if(b)a.className=b;if(c)a.style.cssText=c;if(d)a.innerHTML=
d;return a}function F(f,a,b){for(var f=f.getElementsByTagName(a),c=[],a=0;a<f.length;a++)p(f[a],b)&&c.push(f[a]);return c}function w(f){f=["uuid="+a.uuid,"url="+a.url,"ref="+f,"type="+a.type,"pic="+a.pic];f=B?f.join("&")+"&adEntryIds="+L.join(","):f.join("&");G(C+"/showup?"+f)}function D(a,e){var b,c;for(b in a)c=e[b],typeof c==="undefined"||/(pic|debug|showLogo)$/.test(b)&&typeof c!=="boolean"||/(col|row|picSize|fontSize)$/.test(b)&&(typeof c!=="number"||c<0)||b==="type"&&!s(U,c)||b==="source"&&
!s(M,c)||b==="position"&&!s(V,c)||(c===""&&/(defaultPic|title|url|hash|htcolor|rtcolor|bdcolor|hvcolor)/.test(b)&&(c=null),c!==null&&(b==="promote"&&(c=N(c).substring(0,8)),a[b]=c));b=a.col;c=a.row;H=b*c>10?10:b*c;return a}function W(f,e){n("bShareRecommDiv3").appendChild(e);if(a.type==="slide"&&!a.pic&&e.getElementsByTagName("li").length<4)e.style.height="84px"}function X(f){var e=n("bShareRecommTab"),b=n("bShareRecommDiv2"),c="",d,g,i;e||(e=t("ul","bShareRecommTab","b-recomm-tab"),b.insertBefore(e,
b.firstChild));b=F(f,"div","b-recomm-panel");nodesLen=I;for(d=0;d<b.length;++d)g=b[d].getAttribute("sourceType"),i=Y[g],c+="<li "+(y===g?'class="activated" ':"")+"onclick=\"window.lezhi.switchTo(this,'"+b[d].getAttribute("sourceType")+"');\">",c+=g=="insite"?a.promote:i,c+="</li>",y===g&&(i=b[d],p(i,"activated")||(i.className+=" activated")),d==0&&a.type==="fixed"&&w(g);c+="<div id='bShareRecommPages' class='bShareRecommPages'>";for(d=0;d<z;d++)c+='<span onclick="window.lezhi.switchPage(this,'+d+
')" style="color:'+(d===0?"red":"black")+'">'+(d+1)+"</span>";c+="</div>";nodesLen===0?f.style.display="none":e.innerHTML=c}function O(f,e){var b=a.picSize+30,c=a.col,d=a.pic,g=0,i=n("bShareRecommDiv2"),h=n("bShareRecommDiv3"),b=f.style.width?parseInt(f.style.width):a.pic?b*c:600;if(d)a.type=="slide"&&(g=25),f.style.width=e!=!1?b+g+"px":b+"px",i.style.width=parseInt(f.style.width)-2+"px",h.style.width=parseInt(i.style.width)-g+"px";else if(a.type=="slide"&&(g=e==!1?0:25),f.style.width=i.style.width=
b+g+"px",i.style.width=parseInt(f.style.width)-2+"px",h.style.width=parseInt(i.style.width)-g+"px",e!=!1){var d=b-2,h=F(f,"div","b-recomm-panel"),j,l=h.length;for(j=0;j<l;j++)h[j].style.width=d+"px"}for(var k,h=f.getElementsByTagName("div"),l=parseInt(f.style.width),d=0;d<h.length;++d)if(j=h[d],p(j,"b-recomm-panel")&&p(j,"activated")){k=j;break}if(k){k.style.width=(i.clientWidth-g)*z+"px";pageLists=k.getElementsByTagName("ul");for(d=0;d<pageLists.length;++d)pageLists[d].style.width=i.clientWidth-
g-8+"px";i=a.pic?"auto":l-2;i=a.type=="fixed"?i:i-30;k=k.getElementsByTagName("li");for(d=0;d<k.length;++d)h=k[d],a.pic?(a.type=="slide"&&(g=e==!1?25:0),h.style.width=(b-g-10)/c-2+"px"):(h.style.width=(a.col==1?i-(d==k.length-1?50:20):i/2-15)+"px",h.style.textAlign="left")}}function Z(f){var e=a.type,b,c="b-"+e,d=n("bShareRecommDiv2"),g=!1;e==="slide"&&(b=t("div","recommSlideTag","recommSlideTag","","<div>&gt;&gt;</div>\u4e50\u77e5\u63a8\u8350"),d.insertBefore(b,d.childNodes[0]));if(!p(f,c)){f.className=c;var i,h,j,
l,k,m,x;if(e==="slide")i=a.position,f.className="b-"+e+" b-"+i,e=-1*d.offsetWidth,i==="left"?(d.style.left=e+"px",f.style.left="0px"):(d.style.right=e+"px",f.style.right="0px"),h=!0,x=!1,j=e,k=function(){h===!0&&x===!1&&(P>0?w("insite"):Q>0&&w("trending"),x=!0);var a=h?0:-1*f.offsetWidth;f.style.zIndex=h?"2147483584":"-1";if(j===a)h||J(h);else{j=h?j+40:j-40;if(h&&j>a||!h&&j<a)j=a;i==="left"?d.style.left=j+"px":d.style.right=j+"px";setTimeout(k,1)}},e=q.innerHeight?q.innerHeight:u.clientHeight||v.clientHeight,
b=u.scrollHeight||v.scrollHeight,m=b-e,$(function(){l=t("div","bShareRecommTag","bShareRecommTag");n("bShareRecommTag")||u.appendChild(l);q.onscroll=function(){var a=v.scrollTop||u.scrollTop,b=n("recommSlideTag");n("bShareRecommTag");a==0&&(g=!1);if(!g)(h=m/2<=a&&a!==0)&&J(h),k(),b.style.display=h?"block":"none"};n("bShareRecommTag").onclick=function(){var a=n("recommSlideTag");g=h=!0;J();k();this.style.display="none";if(a)a.style.display="block"};n("recommSlideTag").onclick=function(){h=!1;g=!0;
k();this.style.display="none"}})}}function J(a){n("bShareRecommTag").style.display=a?"none":"block"}function G(a){var e=t("script");e.type="text/javascript";e.charset="utf-8";e.src=a;o.getElementsByTagName("head")[0].appendChild(e)}function $(a){if(o.addEventListener)a();else if(o.attachEvent){o.attachEvent("onreadystatechange",function(){o.readyState==="complete"&&(o.detachEvent("onreadystatechange",arguments.callee),a.call())});q.attachEvent("onload",a);var e=!1;try{e=q.frameElement===null}catch(b){}v.doScroll&&
e&&function(){try{v.doScroll("left")}catch(b){setTimeout(arguments.callee,10);return}a.call()}()}else q.onload=a}function aa(){function a(b,c){if(b/c>2.5)return 0;var d=0;b>=400&&c>=300?d=12E4:(d=b*c,d>12E4&&(d=12E4));return d}function e(a,b){if(b>1500)return 0;var c=0;try{c=Math.abs((g/2-a)*(1500-b)/(g/2*1500))}catch(d){}return c}for(var b=document.images,c=0,d=null,g=document.body.scrollWidth,i="",h=0,j=b.length;h<j;h++){for(var l=b[h],k=l.offsetLeft,m=l.offsetTop,n=l.offsetParent;n!=null&&n.toString()!=
"[object HTMLBodyElement]";)k+=n.offsetLeft,m+=n.offsetTop,n=n.offsetParent;k=Math.abs(k);m=Math.abs(m);i+=l.src+"=>"+l.width+"*"+l.height+" "+k+","+m+"\n";if(l.width>=200&&l.height>=150&&k>30&&k<g/2&&m>30){n=1;if(l.src.indexOf(".gif",l.src.length-4)!==-1||l.src.indexOf(".ico",l.src.length-4)!==-1)n=0.4;k=e(k,m)*a(l.width,l.height)*n;k>c&&(c=k,d=l)}}return d?d.src:""}function ba(){var f=a.pic,e=a.picSize,b=a.position,c=a.fontSize,d=a.type,g=a.promote,i=a.rtcolor,h=a.hvcolor,j=a.htcolor,l=a.bdcolor,
k=b=="left"?"right":"left",m="#bShareRecommDiv{font-size:12px;z-index:2147483584;overflow:hidden !important;margin:0 !important;padding:0 !important;}#bShareRecommDiv2{position:relative;margin:0 !important;padding:0 !important;overflow:hidden;border:1px solid "+(l?l:"#dadada")+"}#bShareRecommDiv3{position:relative;margin:0 !important;padding:0 0 20px 0 !important;overflow:hidden;left:"+(d=="slide"?"25px":"0px")+"}#bShareRecommDiv:after,#bShareRecommDiv2:after,.b-recomm-panel:after,.b-recomm-tab:after,.b-recomm-list:after{content:'.';display:block;height:0;clear:both;visibility:hidden;}.b-recomm-tab{list-style:none !important;padding:0 !important;margin:1px !important;background:#B8CDE3;position:relative;z-index:999;zoom:1;";
m+=d=="slide"?b=="left"?"left:0px;":"left:25px;":"left:0px;";m+="}.b-recomm-tab li{width:auto;list-style:none !important;font-weight:bold;text-indent:0px !important;height:15px;position:relative;line-height:15px;float:left;cursor:pointer;margin:0 5px 0 0 !important;padding:5px 10px !important;text-align:center;position:relative;top:1px;z-index:100;font-size:"+c+"px;"+(j?"color:"+j:"")+"}.bShareRecommPages{float:right;}.bShareRecommPages span{display:block;float:left;padding:0 6px;line-height:25px;cursor:pointer;}.b-recomm-panel{display:none;margin:0 !important;padding:0 !important;float:left;position:relative;";
m+=d=="slide"?b=="left"?"left:0px;":"left:25px;":"left:0px;";m+="background-color:#fff;clear:both;}.b-recomm-list{height:auto;float:left;";if(!f&&d==="slide"&&g.length>A*a.row||f&&d==="slide"&&A===0)m+="height:68px;";m+="padding:0px 4px !important;margin:0 !important;list-style:disc inside none;}.b-recomm-list li{padding:0 !important;display:block;text-align:center;text-indent:0px !important;"+(f?"width:"+(e+8)+"px;height:auto;border:1px solid #fff;cursor:pointer;list-style:none !important;float:left;margin:3px 0;":
"float:left;overflow:hidden;border:0;padding-left:10px !important;")+"}";m+=".b-recomm-list a{font-size:"+c+"px;margin:0 !important;position:relative;text-decoration:none !important;display:"+(f?"block;height:auto;line-height:auto;overflow:visible;":"list-item;zoom:1;height:24px;line-height:24px;overflow:hidden;color:"+i)+";list-style:disc inside none !important;}.b-recomm-list a:hover{border-ratio:5px;"+(h?"color:"+h:"")+"}.bShareRecommTag{margin:0;padding:0;background:url("+R+"/images/recommend.png) no-repeat;width:40px;height:40px;position:fixed;bottom:60px;*bottom:66px;";
m+=(b=="left"?"left:10px;right:auto;":"right:10px;left:auto;")+"z-index:2147483584;cursor:pointer;}";/MSIE 6/.test(navigator.userAgent)&&(m+="*html .bShareRecommTag{position:absolute;z-index:2147483584;bottom:auto;top:expression(eval(-70+document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)));}");m+=".b-recomm-list .feed-title{overflow:hidden;padding:0 !important;margin:5px 0 0 0 !important;line-height:15px;height:30px;font-size:12px;"+
(i?"color:"+i+";":"")+"}";f&&(m+=".b-recomm-list img{display:inline-block !important;padding:3px !important;margin:0 !important;position:relative;top:4px;border:1px solid "+l+";float:none !important;}");m+=".b-recomm-footer{overflow:hidden;float:right;margin:0 !important;position:absolute;text-align:right;bottom:0px;right:3px;"+(f||a.col==2&&a.row>2||d=="fixed"?"width:100%;_bottom:0px;":"position:absolute;padding:0px;")+"}.b-recomm-footer a{font-size:12px;color:#999;text-decoration:none;height:15px !important;line-height:15px !important;}#bShareRecommDiv.b-slide{position:fixed;bottom:10px;top:auto;margin-top:0px !important;}";
/MSIE 6/.test(navigator.userAgent)&&(m+="*html #bShareRecommDiv.b-slide{position:absolute;bottom:auto;top:expression(eval(-10+document.documentElement.scrollTop+document.documentElement.clientHeight-this.offsetHeight-(parseInt(this.currentStyle.marginTop,10)||0)-(parseInt(this.currentStyle.marginBottom,10)||0)));}");m+="#bShareRecommDiv.b-slide.b-left{left:0;}#bShareRecommDiv.b-slide.b-right{right:0px !important;}.b-slide.b-right .b-recomm-tab li{float:left;}.b-slide.b-"+b+" .recommSlideTag{display:none;margin:0 !important;padding:0 0 4px !important;border:1px solid #c2c2c2;position:absolute;width:23px;"+
k+":1px;top:27px;cursor:pointer;text-align:center;line-height:17px;color:#444;background:-webkit-gradient(linear,0% 20%,0% 90%,from(#f4f4f4),to(#d7d7d7));background:-moz-linear-gradient(top,#f4f4f4,#d7d7d7);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='#f4f4f4',EndColorStr='#d7d7d7');_background:#e4e4e4;}";f=m;e=t("style");e.type="text/css";e.styleSheet?e.styleSheet.cssText=f:e.appendChild(o.createTextNode(f));o.getElementsByTagName("head")[0].appendChild(e)}var q=
window,o=q.document,u=o.body,v=o.documentElement,r=encodeURIComponent,N=decodeURIComponent,C="http://lzplugin.bshare.cn/plugin",R="http://lzstatic.bshare.cn",ca=R+"/plugin/img/default.gif",da=C+"/feeds?callback=window.lezhi.callback",ea=C+"/correct?",U=["fixed","slide"],V=["left","right"],M=["insite","trending"],Y={trending:"\u6700\u70ed\u6587\u7ae0",insite:"\u60a8\u53ef\u80fd\u4e5f\u559c\u6b22"},S={},a={},P=0,Q=0,I=0,y="",T=!1,z=0,H=0,E=0,K=o.referrer,A=0,B=!1,L=[];q.bshare_recomm_config=q.bshare_recomm_config||{};lz=q.lezhi={lezhi_ok:!0,init:function(){y=
"";S={uuid:"",promote:"\u60a8\u53ef\u80fd\u4e5f\u559c\u6b22",col:5,row:1,pic:!0,type:"fixed",picSize:88,fontSize:12,sitePrefix:"",defaultPic:ca,position:"right",source:"insite",url:r(o.location.href),title:o.title,hash:N(q.location.hash.substring(1)),htcolor:"#333",rtcolor:"#333",bdcolor:"#DADADA",hvcolor:"#FBFBEF",showLogo:!0,brand:"",debug:!1,mock:!1,thumbnail:"",customTitle:""};if(!K)try{if(window.opener)K=window.opener.location.href}catch(f){}var e=S,b;a:{var c=o.getElementsByTagName("script"),d=c.length,g,i;i=".js#";var h=
{};for(g=0;g<d;g++)if(/lzChinaZ(Org|Tmp)?\.js/.test(c[g].src)){b=c[g].src;break}if(b.indexOf(i)<2)if(b.indexOf(".js?")<2){b={};break a}else i=".js?";c=b.indexOf(i);b=b.substring(c+i.length).split("&");d=b.length;for(i=0;i<d;i++){g=b[i].split("=");c=g[0];g=g[1];if(/(col|row|picSize|fontSize)$/.test(c))try{g=parseInt(g,10)}catch(j){g=null}else/(pic|debug)$/.test(c)&&(g=g==="true");h[c]=g}b=h}a=D(e,b);a=D(a,q.bshare_recomm_config);e="uuid="+a.uuid;b="url="+a.url;h="title="+r(a.title);i="sitePrefix="+
r(a.sitePrefix);c="type="+a.source;d="hash="+a.hash;g=document.getElementsByTagName("META");for(var l="",k=g.length,m=0;m<k;m++)if(g[m].getAttribute("name")=="keywords"){l=g[m].getAttribute("content");break}g=r(l);e=[e,b,h,i,"count=12",c,d,"keywords="+g,"referrer="+K,"mock="+a.mock];a.customTitle!==""&&e.push("customTitle="+a.customTitle);a.thumbnail!==""&&e.push("thumbnail="+a.thumbnail);b=n("bShareRecommDiv");if(!n("bShareRecommDiv2"))var x=t("div","bShareRecommDiv2");b.appendChild(x);if(!n("bShareRecommDiv3")){var p=
t("div","bShareRecommDiv3"),s="";s+=a.brand!=""?'<div class="b-recomm-footer"><span>'+a.brand+"</span></div>":a.showLogo?'<div class="b-recomm-footer" style="position:absolute;float:right;"><a href="http://www.lezhi.me" target="_blank">\u4e50\u77e5</a></div>':""}p.innerHTML=s;x.appendChild(p);G(da+"&"+e.join("&"))},callback:function(f){var e=n("bShareRecommDiv"),b,c=0,d,g,i,h="",j,l,k;k=aa();f.thumbnail!==k&&k!==""&&a.thumbnail===""&&(k=["url="+a.url,"thumbnail="+r(k)],G(ea+"&"+k.join("&")));f&&typeof f.config!==
"undefined"&&(a=D(a,f.config));a=D(a,q.bshare_recomm_config);z=Math.ceil(12/H);c=a.col;k=a.pic;a.picSize=a.picSize>120?120:a.picSize;if(c*a.row>100)a.row=parseInt(100/c,10);A=I=0;for(b in f)if(s(M,b)&&(h="",c=0,d=f[b],g=d.length,b=="insite"?P=g:Q=g,g!==0)){A<g&&(A=g);i=t("div","","b-recomm-panel");i.setAttribute("sourceType",b);if(y==="")i.style.display="block",y=b;for(l=1;l<z+1;l++){for(h+='<ul class="b-recomm-list">';c<l*H&&c<g&&(c<12||!k&&c<a.row);++c){var m=d[c],o=m.url,p=m.title,v=a.hvcolor,
w=m.ad==!0,u="";lz.lezhi_ok?(j=C+"/redirect?to="+r(o)+"&from="+r(a.url)+"&sitePrefix="+r(a.sitePrefix)+"&ref="+b+"&uuid="+r(a.uuid)+"&type="+r(a.type)+"&pic="+r(a.pic)+"&title="+r(a.title),w&&(B||(B=!0),u=o.split("u=")[1].split("_")[1].split("&")[0],L.push(u),j+="&adEntryId="+u)):j=o;h+="<li";k&&(h+=" onmouseover=\"this.style.background='"+v+"'\" onmouseout=\"this.style.background='none';\"");h+='><a href="'+o+'" onmousedown="this.href=\''+j+"';return true;\" onmouseup=\"t=this;setTimeout(function(){t.href='"+
o+'\'},50);return true;" target="_blank" title="'+p+'"';if(k){h+='" hidefocus="true">';if(!(j=m.pic))j=a.defaultPic;h+='<img class="bshare-logos" src="'+j+'" style="width:'+a.picSize+"px !important;height:"+a.picSize+"px !important;border:1px solid "+a.bdcolor+'!important;padding:3px !important;" /><div class="feed-title" title="'+p.replace(/&/g,"&amp").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'">'+p+"</div>"}else h+=">"+p;h+="</a></li>"}h+="</ul>"}i.innerHTML=
h;W(e,i);I++}ba();X(e,i);O(e);Z(e);autoPage=function(){var a;a=n("bShareRecommTab").getElementsByTagName("SPAN");E>=z&&(E=0);q.lezhi.switchPage(a[E],E++);setTimeout(arguments.callee,3E3)}()},switchTo:function(a,e){var b=n("bShareRecommTab"),c=n("bShareRecommDiv"),d=n("bShareRecommDiv3"),g=n("bShareRecommPages").getElementsByTagName("SPAN"),i=g.length,d=d.childNodes,h=b.childNodes,b=1,j=0;B=!1;for(j=0;j<h.length-1;++j)h[j].className="";a.className="activated";for(j=1;j<d.length;++j)if(d[j].getAttribute("sourceType")===
e)d[j].style.display="block",b=d[j],p(b,"activated")||(b.className+=" activated"),b=d[j].getAttribute("cp");else if(d[j].style.display="none",h=d[j],p(h,"activated")){for(var l=h.className.split(" "),k=void 0,k=0;k<l.length;k++)l[k]==="activated"&&l.splice(k++,1);h.className=l.join(" ")}b==null&&(b=0);for(j=0;j<i;j++)g[j].style.color=b==j?"red":"black";O(c,!1);!T&&e=="trending"&&(w("trending"),T=!0)},switchPage:function(f,e){n("bShareRecommDiv");var b=n("bShareRecommDiv3"),c=parseInt(b.style.width)*
e*-1,d=F(b,"div","activated")[0],g,i=parseInt(d.style.left||0),b=f.parentNode.getElementsByTagName("span"),h,j=b.length;for(h=0;h<j;h++)b[h].style.color="black";f.style.color="red";g=function(){var b=c>i?!0:!1,f=a.col*5;if(i!==c){i=b?i+f:i-f;if(b&&i>c||!b&&i<c)i=c;d.setAttribute("cp",e);d.style.left=i+"px";setTimeout(g,1)}};g()}};lz.init()})();
