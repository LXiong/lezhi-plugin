(function(){if(typeof window.lezhi=="undefined"){var l=window.lezhi={},g=document;l.util={isIE6:/msie|MSIE 6/.test(navigator.userAgent),isIE:/msie|MSIE/.test(navigator.userAgent),getElemById:function(b){return g.getElementById(b)},getElemsByTagName:function(b,d){return b.getElementsByTagName(d)},isUndefined:function(b){return typeof b=="undefined"},isNotUndefined:function(b){return typeof b!="undefined"},arrayContains:function(b,d){for(var e=b.length;e--;)if(b[e]===d)return!0;return!1},lzhasClass:function(b,
d){return b.className&&this.arrayContains(b.className.split(" "),d)},addClass:function(b,d){this.lzhasClass(b,d)||(b.className+=(b.className?" ":"")+d)},removeClass:function(b,d){if(this.lzhasClass(b,d)){var e=b.className.split(" "),f;for(f=0;f<e.length;f++)e[f]==d&&e.splice(f++,1);b.className=e.join(" ")}},joinProperty:function(b,d){for(var e in d)b[e]=d[e];return b},createElement:function(b,d,e,f,j){var a=g.createElement(b);if(b=="a")a.href="javascript:;",a.target="_blank";if(d)a.id=d;if(e)a.className=
e;if(f)a.style.cssText=f;if(j)a.innerHTML=j;return a},htmlEncode:function(b){return b.replace(/&/g,"&amp").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getElemByClassName:function(b,d,e){for(var b=this.getElemsByTagName(b,d),f=[],d=0;d<b.length;d++)this.lzhasClass(b[d],e)&&f.push(b[d]);return f},getKeywords:function(){var b=this.getElemsByTagName(g,"META"),d,e="";for(d=0;d<b.length;d++)b[d].getAttribute("name")=="keywords"&&(e=encodeURIComponent(b[d].getAttribute("content")));
return e},getIndex:function(b,d){var e,f=-1;for(e in b)b[e]===d&&(f=e);return f},getHash:function(b){(b=/#(.+)/.exec(b))&&(b=b[0].slice(1));return b||""},loadStyle:function(b){var d=this.createElement("style");d.type="text/css";d.styleSheet?d.styleSheet.cssText=b:d.appendChild(g.createTextNode(b));this.getElemsByTagName(g,"head")[0].appendChild(d);return d},loadModule:function(b){if(!this.arrayContains(l.variables.requestedScripts,b)){!/\showup|\feeds/.test(b)&&!l.util.arrayContains(l.variables.ADS_JS_URL,
b)&&l.variables.requestedScripts.push(b);var d=this.createElement("script");d.type="text/javascript";d.charset="utf-8";d.src=b;this.getElemsByTagName(g,"head")[0].appendChild(d)}},mergeConfig:function(b,d){var e,f,g=l.variables,a=this.joinProperty({},b);for(e in d){f=d[e];if(this.isUndefined(f)||/(pic|highlight|showLogo|picBorderRadius)$/.test(e)&&typeof f!="boolean"||/(col|row|(pic|font|titleFont)Size|width|height|lineHeight|count)$/.test(e)&&(isNaN(f)||typeof f!="number"||f<0)||e=="type"&&!this.arrayContains(g.BSHARE_RECOMM_TYPES,
f)||e=="redirectType"&&!this.arrayContains(g.BSHARE_RECOMM_REDIRECT_TYPE,f)||e=="listType"&&!this.arrayContains(g.BSHARE_RECOMM_LISTTYPE,f)||e=="position"&&!this.arrayContains(g.BSHARE_RECOMM_POSITIONS,f))f=a[e];if(/(ht|rt|bd|hv|bg)color|titleBgColor/.test(e)&&f)try{f=decodeURIComponent(f)}catch(k){}if(e=="promote")try{f=decodeURIComponent(f).slice(0,8)}catch(m){f=f.slice(0,8)}!f&&/uuid|promote|sitePrefix|reason/.test(e)&&(a[e]="");f!==null&&!this.isUndefined(f)&&(a[e]=f)}return a},ready:function(b){if(document.addEventListener)b();
else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),b.call())});window.attachEvent("onload",b);var d=!1;try{d=window.frameElement===null}catch(e){}document.documentElement.doScroll&&d&&function(){try{document.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,10);return}b.call()}()}else window.onload=b},contains:function(b,d){if(b.length==0)return!1;else for(var e=
0;e<b.length;e++)if(b[e]==d)return!0},matchImage:function(){var b=g.images,d=0,e,f=g.body.scrollWidth/2,j,a,k,m,c;a=/combx|ad|comment|community|disqus|extra|foot|header|menu|remark|rss|shoutbox|sidebar|sponsor|ad-break|agegate|pagination|pager|popup|tweet|twitter/i;k=/and|article|body|column|main|shadow/i;m=l.util.getElemsByTagName(g,"*");c=m.length;for(var i=[],u=0;u<c;u++){j=m[u];var q=j.className+j.id;if(q.length>0&&q.search(a)!=-1&&q.search(k)==-1&&j.tagName!=="BODY"){var q=l.util.getElemsByTagName(j,
"img"),p=q.length;for(j=0;j<p;j++)i.push(q[j])}}for(j=0;j<b.length;j++)if(a=b[j],!l.util.contains(i,a)){k=a.offsetLeft;m=a.offsetTop;for(c=a.offsetParent;c&&c.nodeName!="BODY";)k+=c.offsetLeft,m+=c.offsetTop,c=c.offsetParent;k=k>0?k:-k;m=m>0?m:-m;a.width>=200&&a.height>=150&&k>40&&k<f&&m>40&&(k=Math.abs((f-k)*(1500-m)/(f*1500))*(a.width/a.height>2?0:a.width*a.height>12E4?12E4:a.width*a.height)*(/\.(gif|ico)$/.test(a.src)?0.4:1),k>d&&(d=k,e=a))}return e?e.src:""}}}})();var BSHARE_FEEDS_BASE="http://api.bshare.cn",LEZHI_PLUGIN_BASE="http://lzplugin.bshare.cn/plugin",LEZHI_STATIC_BASE="http://lzstatic.bshare.cn";
(function(){function l(){var k=a.util.getElemsByTagName(b,"script"),d,c,i,e={};for(d=0;d<k.length;d++)if(/(lzKDS|lezhiKDS)(Org|Tmp)?\.js/.test(k[d].src)&&(i=/\?(.*)|#(.*)/.exec(k[d].src))){i=i[0].slice(1).split("&");for(k=0;k<i.length;k++)if(c=i[k].split("="),(d=c[0])!="")c=c[1],/(col|row|(pic|font|titleFont)Size|width|height|lineHeight|count)$/.test(d)?c=+c:/(pic|highlight|showLogo|picBorderRadius|(title|font)Bold|(font|link)Underline)$/.test(d)&&(c=c=="true"),e[d]=c;break}return e}if(typeof window.lezhi.init==
"undefined"){var g=window,b=g.document,d=decodeURIComponent,e=LEZHI_STATIC_BASE+"/plugin/",f=LEZHI_STATIC_BASE+"/plugin/img/",j=f+"default.gif",a=g.lezhi=g.lezhi.util.joinProperty(g.lezhi,{modules:{nodes:[],config:[],currentActivated:[],sourceCount:[],isSetCount:[]},variables:{ADS_JS_URL:["http://static.mediav.com/js/mvf_g2.js"],ADS_JS_IDS_MEDIAV:{"300x250":"3cv6mn_1019305","200x200":"I1hc34_1019688","300x100":"8yAhOD_1019306","610x100":"gxGLV3_1019413","660x90":"pMlk3O_1019412","728x90":"7ZRsbM_1015958"},
ADS_JS_WRAP_MEDIAV:"mediaV",ADS_PRELOAD_DIV_ID:"lzPreloadDiv",ADS_CONTENT_ID:"mvdiv_1019305_holder",DEFAULT_PIC_URL:j,HOT_PIC_URL:f+"hot.png",PAGEON_PIC_URL:f+"on.png",PAGEOFF_PIC_URL:f+"off.png",BSHARE_FEEDS_LINK:BSHARE_FEEDS_BASE+"/feeds/trending.json?callback=window.lezhi.callback",LEZHI_PLUGIN_LINK:LEZHI_PLUGIN_BASE+"/feeds?callback=window.lezhi.callback",LEZHI_CORRECT_LINK:LEZHI_PLUGIN_BASE+"/correct?",LEZHI_UTIL_LINK:e+"lz-util.js?v=20130702",LEZHI_ENGINE_LINK:e+"lz-engine.js?v=20130702",LEZHI_STYLEDEFAULT_LINK:e+
"lz-style-default.js?v=20130702",LEZHI_STYLE300x250_LINK:e+"lz-style-300x250.js?v=20130702",LEZHI_STYLE200x200_LINK:e+"lz-style-200x200.js?v=20130702",LEZHI_STYLE300x100_LINK:e+"lz-style-300x100.js?v=20130702",LEZHI_STYLE728x90_LINK:e+"lz-style-728x90.js?v=20130702",BSHARE_RECOMM_TYPES:["fixed","slide"],BSHARE_RECOMM_POSITIONS:["left","right"],BSHARE_RECOMM_REDIRECT_TYPE:["_self","_blank"],BSHARE_RECOMM_LISTTYPE:["disc","square","none"],STYLETYPE_DEFAULT:"lz-style-default",STYLETYPE_300x250:"lz-style-300x250",
STYLETYPE_200x200:"lz-style-200x200",STYLETYPE_300x100:"lz-style-300x100",STYLETYPE_728x90:"lz-style-728x90",BSHARE_RECOMM_SOURCES_NAMES:{trending:"\u6700\u70ed\u6587\u7ae0",insite:"\u60a8\u53ef\u80fd\u4e5f\u559c\u6b22",itemcf:"\u4e2a\u4eba\u63a8\u8350"},adsIds:[],adsPreloadDone:[],adsShow:!1,currentPage:[],referrer:b.referrer,requestedScripts:[],trendingShow:!1,vid:""},config:{global:{uuid:"",promote:"\u60a8\u53ef\u80fd\u4e5f\u559c\u6b22",col:5,row:2,pic:!0,type:"fixed",picSize:88,fontSize:12,sitePrefix:"",defaultPic:j,position:"right",source:"insite",url:encodeURIComponent(b.location.href),
title:b.title,hash:d(g.location.hash.substring(1)),htcolor:"#333",rtcolor:"#333",bdcolor:"#DADADA",hvcolor:"#333",highlight:!1,showLogo:!0,mock:!1,count:0,adCount:0,autoPageTime:6E3,width:0,height:0,titleBgColor:"#fff",titleFontSize:12,titleBold:!1,fontBold:!1,fontUnderline:!1,linkUnderline:!1,redirectType:"_blank",picMatch:"insite",bgcolor:"#fff",picBorderRadius:!0,lineHeight:15,listType:"disc"}},init:function(){var d;a.modules.nodes=a.util.getElemByClassName(b,"div","lz-module");if(a.util.getElemById("bShareRecommDiv"))d=
a.modules.nodes.push(a.util.getElemById("bShareRecommDiv")),a.modules.nodes[d-1].oldVersionId=!0;a.modules.nodes.length!=0&&a.util.loadModule(a.variables.LEZHI_ENGINE_LINK)},switchTo:function(b,d,c,i,e){var f=b.parentNode,g,j=[],n=0;i>1?(g=a.util.getElemByClassName(f.parentNode,"div","bShareRecommDiv3")[0],j=a.util.getElemByClassName(f.parentNode,"div","bShareRecommPages")[0].getElementsByTagName("span"),n=1):g=f.parentNode;g=g.childNodes;var f=f.getElementsByTagName("li"),h,l=g.length;for(h=h=0;h<
f.length;++h)f[h].className="";b.className="activated";for(h=i>1?0:c==="slide"?2:1;h<l;++h)g[h].getAttribute("sourceType")==d?(g[h].style.display="block",a.util.addClass(g[h],"activated"),n=g[h].getAttribute("cp")||0):(g[h].style.display="none",a.util.removeClass(g[h],"activated"));for(h=0;h<j.length;h++)j[h].className=n==h?"on":"";if(!a.variables.trendingShow&&d=="trending")a.stats.view("trending",e),a.variables.trendingShow=!0},autoPage:function(b,d,c,i,e){var f=a.util.getElemsByTagName(a.util.getElemByClassName(a.modules.nodes[b],
"div","bShareRecommPages")[0],"SPAN");a.util.isUndefined(a.variables.currentPage[b])&&(a.variables.currentPage[b]=0);a.variables.currentPage[b]>=d&&(a.variables.currentPage[b]=0);a.switchPage(f[a.variables.currentPage[b]],a.variables.currentPage[b]++,c,e);setTimeout(function(){a.autoPage(b,d,c,i,e)},i)},switchPage:function(b,d,c,i){var e=a.util.getElemByClassName(b.parentNode.parentNode.parentNode,"div","bShareRecommDiv3")[0],f=+e.clientWidth*-d-(!a.util.isUndefined(i)?i:0),g=a.util.getElemByClassName(e,
"div","activated")[0],i=a.util.getElemsByTagName(g,"li"),e=[],j=a.util.getIndex(a.modules.nodes,b.parentNode.parentNode.parentNode),l,h=parseInt(g.style.left||0),r=b.parentNode.getElementsByTagName("span"),o,v=(d+1)*c,w=r.length,t;for(o=0;o<w;o++)a.util.removeClass(r[o],"on");a.util.addClass(b,"on");l=function(){var a=f>h,b=!a?c*5:c*10;if(h!=f){h=a?h+b:h-b;if(a&&h>f||!a&&h<f)h=f;g.setAttribute("cp",d);g.style.left=h+"px";setTimeout(l,1)}};l();for(o=v-c;o<v;o++)if(i[o]&&(t=i[o].getAttribute("adEntryId")))if(t&&
!a.util.arrayContains(a.variables.adsIds[j],t))a.variables.adsIds[j].push(t),e.push(t);else return;else return;a.stats.adsView(j,e)},stats:{view:function(b,d){var c=a.modules.config[d],c=["uuid="+c.uuid,"url="+c.url,"ref="+b,"type="+c.type,"pic="+c.pic,"timestamp="+ +new Date],c=c.join("&");a.util.loadModule(LEZHI_PLUGIN_BASE+"/showup?"+c)},adsView:function(b,d){var c=a.modules.config[b],c=["uuid="+c.uuid,"url="+c.url,"timestamp="+ +new Date],c=c.join("&")+(a.variables.adsShow?"&adEntryIds="+d.join(","):
"");a.util.loadModule(LEZHI_PLUGIN_BASE+"/adShowup?"+c)}},ads:{preload:function(d,e,c){var i=300,f=250;e.lezhiStyle==a.variables.STYLETYPE_200x200&&(f=i=200);e.lezhiStyle==a.variables.STYLETYPE_300x100&&(i=300,f=100);e.lezhiStyle==a.variables.STYLETYPE_728x90&&(i=728,f=90);g.mediav_ad_wrap=a.variables.ADS_PRELOAD_DIV_ID+d;g.mediav_ad_pub=a.variables.ADS_JS_IDS_MEDIAV[i+"x"+f];g.mediav_ad_width=i;g.mediav_ad_height=f;f=a.util.createElement("div",a.variables.ADS_PRELOAD_DIV_ID+d,"","width:"+i+"px;height:"+
f+"px;background:#eee;");i=a.util.createElement("script");i.src=c;i.type="text/javascript";i.charset="utf-8";i.onload=function(){a.ads.preloadCb(d)};i.onreadystatechange=function(){/complete|loaded/.test(this.readyState)&&a.ads.preloadCb(d)};e.appendChild(f);a.util.getElemsByTagName(b,"head")[0].appendChild(i)},preloadCb:function(b){a.variables.adsPreloadDone[b]=!0}},getConfigurations:function(b){function d(a){return r(a.col)||r(a.row)||r(a.count)}var c=g.lezhi_config||{},e=g.lezhi_style_core||{},
f=g.lezhi_style_default||{},j=g.lezhi_style_300x250||{},p=g.lezhi_style_200x200||{},s=g.lezhi_style_300x100||{},n=g.lezhi_style_728x90||{},h=a.util.isUndefined,r=a.util.isNotUndefined;lezhiStyleDefaultConfigGlobal=f.global||{};lezhiStyle300x250ConfigGlobal=j.global||{};lezhiStyle200x200ConfigGlobal=p.global||{};lezhiStyle300x100ConfigGlobal=s.global||{};lezhiStyle728x90ConfigGlobal=n.global||{};a.config.global=a.util.mergeConfig(a.config.global,a.variables.configPre);a.config.global=a.util.mergeConfig(a.config.global,
l());if(b)a.config.global=a.util.mergeConfig(a.config.global,b);b=a.util.mergeConfig({},g.bshare_recomm_config||{});b=a.util.mergeConfig(b,c.global||{});b=a.util.mergeConfig(b,e.global||{});a.config.global=a.util.mergeConfig(a.config.global,b);for(c=0;c<a.modules.nodes.length;c++)if(a.modules.isSetCount[c]=d(b),e=a.modules.nodes[c],a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],a.config.global),a.util.lzhasClass(e,a.variables.STYLETYPE_DEFAULT)||e.oldVersionId){if(a.modules.config[c]=
a.util.mergeConfig(a.modules.config[c],f.global||{}),a.modules.nodes[c].lezhiStyle=a.variables.STYLETYPE_DEFAULT,a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(lezhiStyleDefaultConfigGlobal)),e.id&&!h(f[e.id]))a.modules.nodes[c].idConfig=!0,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],f[e.id]),a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(f[e.id]))}else if(a.util.lzhasClass(e,a.variables.STYLETYPE_300x250)){if(a.modules.config[c].adEnabled=!0,a.modules.config[c].adPreload=
!1,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],j.global||{}),a.modules.nodes[c].lezhiStyle=a.variables.STYLETYPE_300x250,a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(lezhiStyle300x250ConfigGlobal)),e.id&&!h(j[e.id]))a.modules.nodes[c].idConfig=!0,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],j[e.id]),a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(j[e.id]))}else if(a.util.lzhasClass(e,a.variables.STYLETYPE_200x200)){if(a.modules.config[c].adEnabled=!0,a.modules.config[c].adPreload=
!1,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],p.global||{}),a.modules.nodes[c].lezhiStyle=a.variables.STYLETYPE_200x200,a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(lezhiStyle200x200ConfigGlobal)),e.id&&!h(p[e.id]))a.modules.nodes[c].idConfig=!0,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],p[e.id]),a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(p[e.id]))}else if(a.util.lzhasClass(e,a.variables.STYLETYPE_300x100)){if(a.modules.config[c].adEnabled=!0,a.modules.config[c].adPreload=
!1,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],s.global||{}),a.modules.nodes[c].lezhiStyle=a.variables.STYLETYPE_300x100,a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(lezhiStyle300x100ConfigGlobal)),e.id&&!h(s[e.id]))a.modules.nodes[c].idConfig=!0,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],s[e.id]),a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(s[e.id]))}else if(a.util.lzhasClass(e,a.variables.STYLETYPE_728x90)&&(a.modules.config[c].adEnabled=!0,a.modules.config[c].adPreload=
!1,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],n.global||{}),a.modules.nodes[c].lezhiStyle=a.variables.STYLETYPE_728x90,a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(lezhiStyle300x100ConfigGlobal)),e.id&&!h(n[e.id])))a.modules.nodes[c].idConfig=!0,a.modules.config[c]=a.util.mergeConfig(a.modules.config[c],n[e.id]),a.modules.isSetCount[c]||(a.modules.isSetCount[c]=d(n[e.id]))}});a.variables.configPre=l();a.util.ready(a.init)}})();
